<html>
<head>
    <style>
        legend {
            text-align: center;
            font-size: 16pt;
        }

        .left-side-label {
            width: 4em;
            float: left;
            text-align: right;
            margin-right: 0.5em;
            display: block;
        }

        fieldset {
            border: 1px solid #dadada;
            width: 16em;
        }

        .status-message {
            font-size: 10pt;
            color: red;
        }

    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" language="JavaScript">
        var socket = io.connect();

        socket.on("connect", function (data) {
            console.log("Connected to server.");
        });

        socket.on("user-valid", function() {
            // Go back to mainadmin window
            location.href = "mainadmin.html?uid=" + $("#uid").val();
        });

        socket.on("user-not-valid", function() {
            $("#login").prop("disabled", false);
            $(".status-message").toggleClass("red");
            $(".status-message").text("User invalid. Please try again.");
        });

        var ValidateUser = function () {
            var uid = $("#uid").val()
            $("#login").prop("disabled", true);
            $(".status-message").text("");
            console.log("Requesting server to validate user " + uid);
            socket.emit("validate user", uid);
        }

        var Main = function() {
            $("#login").click(ValidateUser);
        }

        $(document).ready(Main);

    </script>

    <title>FISH Administration</title>
</head>

<body>
<form action="mainadmin.html">
    <fieldset>
        <legend>
            Log in to work with FISH
        </legend>
        <label for="uid" class="left-side-label">User ID: </label>
        <input type="text" id="uid" name="uid" />

        <button type="button" id="login">Login</button>
        <br>
        <label class="status-message"></label>
    </fieldset>
</form>
</body>
</html>
